---
layout: default
---

{% comment %}
상위 카테고리 페이지 레이아웃
parent_category로 필터링하여 포스트 표시 및 하위 카테고리 표시
{% endcomment %}

{% assign parent_cat = page.parent_category %}
{% assign all_posts = site.posts | where: "parent_category", parent_cat %}

<div class="parent-category-page max-w-6xl mx-auto">
  <header class="mb-6 md:mb-8">
    <div class="flex items-center gap-2 md:gap-3 mb-3 md:mb-4">
      <span class="text-3xl md:text-5xl">{{ page.icon }}</span>
      <h1 class="text-2xl md:text-4xl font-bold">{{ page.title }}</h1>
    </div>
    <p class="text-sm md:text-base text-muted-foreground mb-4">
      {{ page.description }}
    </p>
    <p class="text-sm md:text-base text-muted-foreground">
      총 {{ all_posts | size }}개의 글
    </p>
  </header>

  {% comment %} 하위 카테고리 표시 {% endcomment %}
  {% if page.subcategories %}
  <section class="mb-8 md:mb-12">
    <h2 class="text-lg md:text-2xl font-bold mb-4 md:mb-6">하위 카테고리</h2>
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4">
      {% for subcat_id in page.subcategories %}
        {% assign subcat = site.data.categories.categories | where: "id", subcat_id | first %}
        {% if subcat %}
          {% assign subcat_posts = all_posts | where: "category", subcat_id %}
          <a href="{{ '/category/' | append: subcat_id | append: '/' | relative_url }}"
             class="block bg-card rounded-lg border border-border p-3 md:p-4 hover:shadow-lg transition-all hover:border-primary no-underline group">
            <div class="font-semibold text-sm md:text-base mb-1 group-hover:text-primary">
              {{ subcat.name_kr }}
            </div>
            <div class="text-xs md:text-sm text-muted-foreground">
              {{ subcat_posts | size }}개의 글
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {% comment %} 최근 포스트 표시 {% endcomment %}
  <section>
    <h2 class="text-lg md:text-2xl font-bold mb-4 md:mb-6">최근 포스트</h2>
    <div class="grid gap-4 md:gap-6">
      {% for post in all_posts limit:20 %}
      <article class="bg-card rounded-lg border border-border p-4 md:p-6 hover:shadow-lg transition-all hover:border-primary">
        <h3 class="text-lg md:text-2xl font-bold mb-1.5 md:mb-2">
          <a href="{{ post.url | relative_url }}" class="no-underline hover:text-primary text-foreground">
            {{ post.title }}
          </a>
        </h3>

        <div class="flex items-center gap-2 md:gap-3 text-xs md:text-sm text-muted-foreground mb-2 md:mb-3">
          <time datetime="{{ post.date | date_to_xmlschema }}" class="flex items-center gap-1">
            <svg class="h-3 w-3 md:h-4 md:w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            {{ post.date | date: "%Y년 %m월 %d일" }}
          </time>

          {% comment %} 카테고리 배지 {% endcomment %}
          {% if post.category %}
            {% assign cat_info = site.data.categories.categories | where: "id", post.category | first %}
            {% if cat_info %}
            <span class="inline-flex items-center gap-1 px-2 md:px-2.5 py-0.5 md:py-1 text-[10px] md:text-xs rounded-md bg-muted text-foreground">
              {{ cat_info.name_kr }}
            </span>
            {% endif %}
          {% endif %}

          {% comment %} PACER 배지 {% endcomment %}
          {% if post.learning_framework.pacer_type %}
            {% assign pacer = site.data.learning_framework.pacer_types | where: "id", post.learning_framework.pacer_type | first %}
            {% if pacer %}
            <span class="inline-flex items-center gap-1 px-2 md:px-2.5 py-0.5 md:py-1 text-[10px] md:text-xs rounded-md pacer-badge pacer-{{ pacer.id }}">
              {{ pacer.symbol }} {{ pacer.name_kr }}
            </span>
            {% endif %}
          {% endif %}
        </div>

        {% if post.excerpt %}
        <p class="text-sm md:text-base text-muted-foreground mb-3 md:mb-4 leading-relaxed">
          {{ post.excerpt | strip_html | truncate: 200 }}
        </p>
        {% endif %}

        {% if post.tags %}
        <div class="flex flex-wrap gap-1.5 md:gap-2">
          {% for tag in post.tags limit:5 %}
          <a href="{{ '/tags/' | append: tag | append: '/' | relative_url }}" class="inline-flex items-center gap-1 px-2 md:px-2.5 py-0.5 md:py-1 text-[10px] md:text-xs rounded-md bg-muted text-foreground hover:bg-primary hover:text-primary-foreground transition-colors no-underline">
            {{ tag }}
          </a>
          {% endfor %}
        </div>
        {% endif %}
      </article>
      {% endfor %}
    </div>
  </section>
</div>
